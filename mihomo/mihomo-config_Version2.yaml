mixed-port: 7890      # æ··åˆç«¯å£ HTTP(S) å’Œ SOCKS
allow-lan: true       # å…è®¸å±€åŸŸç½‘è¿æ¥
bind-address: '*'     # ç›‘å¬åœ°å€
mode: rule            # è§„åˆ™æ¨¡å¼
log-level: info       # æ—¥å¿—çº§åˆ«
ipv6: true          # IPv6 æ”¯æŒ
external-controller: 127.0.0.1:9090  # å¤–éƒ¨æ§åˆ¶å™¨åœ°å€

# å®éªŒæ€§åŠŸèƒ½
experimental:
  ignore-resolve-fail: true

# å¼€å¯ geodata æ¨¡å¼
profile:
  store-selected: true        # å­˜å‚¨é€‰æ‹©
  store-fake-ip: true        # å­˜å‚¨ fake-ip

geodata-mode: true           # å¯ç”¨ geodata æ¨¡å¼
tcp-concurrent: true         # TCP å¹¶å‘è¿æ¥

# geo æ•°æ®åº“è®¾ç½®
geo-auto-update: true        # è‡ªåŠ¨æ›´æ–° geo æ•°æ®åº“
geo-update-interval: 24      # æ›´æ–°é—´éš”(å°æ—¶)

geox-url:
  geoip: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geoip.dat"
  geosite: "https://github.com/Loyalsoldier/v2ray-rules-dat/releases/latest/download/geosite.dat"
  mmdb: "https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb"

# DNS è®¾ç½®
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: redir-host  # redir-host æ¨¡å¼å¯¹ geodata æ”¯æŒæ›´å¥½
  nameserver:
    - 223.5.5.5      # é˜¿é‡ŒDNS
    - 119.29.29.29   # è…¾è®¯DNS
  fallback:
    - 1.1.1.1        # Cloudflare DNS
    - 8.8.8.8        # Google DNS
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32

# è®¢é˜…åœ°å€
proxy-providers:
  provider1:
    type: http
    url: "https://raw.githubusercontent.com/Jsnzkpg/Jsnzkpg/Jsnzkpg/Jsnzkpg"
    interval: 1440    # æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰
    path: ./provider1.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

  provider2:
    type: http
    url: "https://raw.githubusercontent.com/ts-sf/fly/main/clash"
    interval: 1440
    path: ./provider2.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
  
  provider3:
    type: http
    url: "https://raw.githubusercontent.com/snakem982/proxypool/main/source/clash-meta.yaml"
    interval: 1440   
    path: ./provider3.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

# ç­–ç•¥ç»„
proxy-groups:
  - name: "ğŸš€ èŠ‚ç‚¹é€‰æ‹©"
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT
    use:
      - provider1
      - provider2
      - provider3

  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - provider1
      - provider2
      - provider3

  - name: "ğŸ“² ç”µæŠ¥ä¿¡æ¯"
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©

  - name: "ğŸ¬ å›½å¤–åª’ä½“"
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT

  - name: "ğŸ¯ å…¨çƒç›´è¿"
    type: select
    proxies:
      - DIRECT
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  - name: "ğŸ›‘ å¹¿å‘Šæ‹¦æˆª"
    type: select
    proxies:
      - REJECT
      - DIRECT

# è§„åˆ™
rules:
  # å¹¿å‘Šæ‹¦æˆª
  - GEOSITE,category-ads-all,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  
  # Telegram è§„åˆ™
  - GEOSITE,telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  - GEOIP,telegram,ğŸ“² ç”µæŠ¥ä¿¡æ¯
  
  # Google è§„åˆ™
  - GEOSITE,google,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  
  # å›½å¤–åª’ä½“
  - GEOSITE,netflix,ğŸ¬ å›½å¤–åª’ä½“
  - GEOSITE,disney,ğŸ¬ å›½å¤–åª’ä½“
  - GEOSITE,youtube,ğŸ¬ å›½å¤–åª’ä½“
  
  # ç›´è¿è§„åˆ™
  - GEOSITE,category-games@cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOSITE,cn,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
  
  # ä»£ç†è§„åˆ™
  - GEOSITE,geolocation-!cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  
  # æœ€ç»ˆè§„åˆ™
  - MATCH,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
